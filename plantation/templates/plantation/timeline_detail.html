<!-- timeline_detail.html -->
{% extends 'plantation/base.html' %}

{% block title %}Timeline Details{% endblock %}

{% block content %}
    <h2>Timeline for {{ plantation.name }}</h2>
    
    {% if messages %}
        <ul class="messages">
            {% for message in messages %}
                <li class="{{ message.tags }}">{{ message }}</li>
            {% endfor %}
        </ul>
    {% endif %}
    
    <p>Date: {{ timeline.activity_date }}</p>
    <p>Description: {{ timeline.description }}</p>

    <h3>Comments</h3>
    <ul>
        {% for comment in comments %}
            <li>{{ comment.user.username }}: {{ comment.text }} ({{ comment.created_at }})</li>
        {% endfor %}
    </ul>

    {% if can_add_comment %}
        <form method="post" action="{% url 'add_comment' plantation_id=plantation.id timeline_id=timeline.id %}">
            {% csrf_token %}
            <textarea name="text" placeholder="Add a comment"></textarea>
            <button type="submit">Submit</button>
        </form>
    {% else %}
        <p>You are not authorized to add comments.</p>
    {% endif %}
{% endblock %}
